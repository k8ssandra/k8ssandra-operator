apiVersion: k8ssandra.io/v1alpha1
kind: K8ssandraCluster
metadata:
  name: test
spec:
  cassandra:
    serverVersion: 6.8.19
    serverType: dse
    dseWorkloads:
      graphEnabled: false
      searchEnabled: false
    datacenters:
      - metadata:
          name: dc1
        k8sContext: kind-k8ssandra-0
        size: 1
        storageConfig:
          cassandraDataVolumeClaimSpec:
            storageClassName: standard
            accessModes:
              - ReadWriteOnce
            resources:
              requests:
                storage: 5Gi
        config:
          cassandraYaml:
            authenticator: com.datastax.bdp.cassandra.auth.DseAuthenticator
            authorizer: com.datastax.bdp.cassandra.auth.DseAuthorizer
            role_manager: com.datastax.bdp.cassandra.auth.DseRoleManager
          dseYaml:
            advanced_replication_options:
              advanced_replication_directory: advancedReplicationDirectory
              conf_driver_password_encryption_enabled: true
              enabled: true
              security_base_path: securityBasePath
            alwayson_sql_options:
              alwayson_sql_status_check_wait_time_ms: 103
              auth_user: authUser
              enabled: true
              heartbeat_update_interval_seconds: 105
              log_dsefs_dir: logDsefsDir
              reserve_port_wait_time_ms: 102
              runner_max_errors: 104
              thrift_port: 100
              web_ui_port: 101
              workpool: workpool
            async_bootstrap_reindex: true
            audit_logging_options:
              enabled: true
              excluded_categories: excludedCategories
              excluded_keyspaces: excludedKeyspaces
              excluded_roles: excludedRoles
              included_categories: includedCategories
              included_keyspaces: includedKeyspaces
              included_roles: includedRoles
              logger: SLF4JAuditWriter
            authentication_options:
              allow_digest_with_kerberos: true
              default_scheme: internal
              enabled: true
              other_schemes:
                - ldap
              plain_text_without_ssl: block
              scheme_permissions: true
            authorization_options:
              allow_row_level_security: true
              enabled: true
              transitional_mode: strict
            back_pressure_threshold_per_core: 100
            cassandra_audit_writer_options:
              batch_size: 101
              day_partition_millis: 104
              dropped_event_log: droppedEventLog
              flush_time: 102
              mode: async
              queue_size: 103
              write_consistency: EACH_QUORUM
            cluster_summary_stats_options:
              enabled: true
              refresh_rate_ms: 100
            config_encryption_active: true
            config_encryption_key_name: config.encryption.key.name
            cql_slow_log_options:
              enabled: true
              minimum_samples: 101
              num_slowest_queries: 103
              skip_writing_to_db: true
              threshold: 200
              ttl_seconds: 102
            cql_solr_query_paging: driver
            cql_solr_query_row_timeout: 100
            cql_system_info_options:
              enabled: true
              refresh_rate_ms: 100
            db_summary_stats_options:
              enabled: true
              refresh_rate_ms: 100
            dsefs_options:
              compression_frame_max_size: 105
              data_directories:
                - dir: dir
                  min_free_space: 1000000
                  storage_weight: 1
              enabled: true
              gossip_options:
                round_delay_ms: 108
                shutdown_delay_ms: 110
                startup_delay_ms: 109
              keyspace_name: keyspaceName
              private_port: 101
              public_port: 100
              query_cache_expire_after_ms: 107
              query_cache_size: 106
              rest_options:
                client_close_timeout_ms: 113
                connection_open_timeout_ms: 112
                core_max_concurrent_connections_per_host: 117
                idle_connection_timeout_ms: 115
                internode_idle_connection_timeout_ms: 116
                request_timeout_ms: 111
                server_request_timeout_ms: 114
              server_close_timeout_ms: 104
              service_close_timeout_ms: 103
              service_startup_timeout_ms: 102
              transaction_options:
                block_allocator_options:
                  overflow_factor: 1.05
                  overflow_margin_mb: 123
                conflict_retry_count: 120
                conflict_retry_delay_ms: 119
                execution_retry_count: 122
                execution_retry_delay_ms: 121
                transaction_timeout_ms: 118
              work_dir: workDir
            enable_health_based_routing: true
            enable_index_disk_failure_policy: true
            flush_max_time_per_core: 101
            graph: { }
            graph_events:
              ttl_seconds: 100
            gremlin_server:
              gremlinPool: 102
              port: 100
              scriptEngines:
                gremlin-groovy:
                  config:
                    sandbox_enabled: true
                    sandbox_rules:
                      blacklist_packages:
                        - package3
                        - package4
                      blacklist_supers:
                        - super3
                        - super4
                      whitelist_packages:
                        - package1
                        - package2
                      whitelist_supers:
                        - super1
                        - super2
                      whitelist_types:
                        - type1
                        - type2
              threadPoolWorker: 101
            histogram_data_options:
              enabled: true
              refresh_rate_ms: 100
              retention_count: 100
            index_options: { }
            insights_options:
              data_dir: dataDir
              log_dir: logDir
            internode_messaging_options:
              client_max_connections: 104
              client_request_timeout_seconds: 107
              client_worker_threads: 105
              frame_length_in_mb: 101
              handshake_timeout_seconds: 106
              port: 100
              server_acceptor_threads: 102
              server_worker_threads: 103
            kerberos_options:
              http_principal: http-principal
              keytab: "/mnt/dir"
              qop: auth
              service_principal: service-principal
            kmip_hosts:
              group1:
                hosts: host1,host2
            ldap_options:
              all_parent_groups_memberof_attribute: all.parent.groups.member.of.attribute
              all_parent_groups_search_filter: all.parent.groups.search.filter
              all_parent_groups_search_type: directory_search
              connection_pool:
                max_active: 10
                max_idle: 20
              credentials_validity_in_ms: 1000
              dns_service_discovery:
                fqdn: fqdn
                lookup_timeout_ms: 1000
                polling_interval_ms: 1002
                retention_duration_ms: 1001
              extra_group_search_bases:
                - group.search.base.1
                - group.search.base.2
              extra_user_search_bases:
                - user.search.base.1
                - user.search.base.2
              group_name_attribute: group.name.attribute
              group_search_base: group.search.base
              group_search_filter: group.search.filter
              group_search_type: directory_search
              groups_update_interval_in_ms: 1004
              groups_validity_in_ms: 1003
              hostname_verification: true
              search_dn: search.dn
              search_password: search.password
              search_validity_in_seconds: 1000
              server_host: ldap.server.host
              server_port: 389
              ssl_protocol: TLSv1.2
              truststore_password: truststore.password
              truststore_path: "/mnt/dir/truststore.jks"
              truststore_type: JKS
              use_ssl: true
              use_tls: true
              user_member_of_attribute: user.member.of.attribute
              user_search_base: user.search.base
              user_search_filter: user.search.filter
            lease_metrics_options:
              enabled: true
              ttl_seconds: 100
            load_max_time_per_core: 102
            max_memory_to_lock_fraction: 0.2
            max_memory_to_lock_mb: 1024
            node_health_options:
              dropped_mutation_window_minutes: 10
              refresh_rate_ms: 1000
              uptime_ramp_up_period_seconds: 100
            performance_core_threads: 100
            performance_max_threads: 101
            performance_queue_capacity: 102
            ram_buffer_heap_space_in_mb: 103
            ram_buffer_offheap_space_in_mb: 104
            resource_level_latency_tracking_options:
              enabled: true
              refresh_rate_ms: 100
            retention_time: 100
            resource_manager_options:
              worker_options:
                cores_total: 1
                memory_total: 0.8
                workpools:
                  - cores: 1
                    memory: 1
                    name: workpool1
            role_management_options:
              mode: internal
              mode_by_authentication:
                internal: internal
                kerberos: internal
                ldap: internal
              stats: true
            server_id: server-id
            shard_transport_options:
              netty_client_request_timeout: 100
            solr_cache_stats_options:
              enabled: true
              refresh_rate_ms: 103
              ttl_seconds: 103
            solr_data_dir: data.dir
            solr_encryption_options:
              decryption_cache_offheap_allocation: true
              decryption_cache_size_in_mb: 1024
            solr_field_cache_enabled: true
            solr_index_stats_options:
              enabled: true
              refresh_rate_ms: 102
              ttl_seconds: 102
            solr_latency_snapshot_options:
              enabled: true
              refresh_rate_ms: 104
              ttl_seconds: 104
            solr_request_handler_metrics_options:
              enabled: true
              refresh_rate_ms: 101
              ttl_seconds: 101
            solr_resource_upload_limit_mb: 105
            solr_slow_sub_query_log_options:
              async_writers: 101
              enabled: true
              threshold_ms: 102
              ttl_seconds: 100
            solr_update_handler_metrics_options:
              enabled: true
              refresh_rate_ms: 100
              ttl_seconds: 100
            spark_application_info_options:
              driver:
                connectorSource: true
                jvmSource: true
                sink: true
                stateSource: true
              enabled: true
              executor:
                connectorSource: true
                jvmSource: true
                sink: true
              refresh_rate_ms: 100
            spark_cluster_info_options:
              enabled: true
              refresh_rate_ms: 100
            spark_daemon_readiness_assertion_interval: 100
            spark_process_runner:
              run_as_runner_options:
                user_slots:
                  - user1
                  - user2
              runner_type: run_as
            spark_security_enabled: true
            spark_security_encryption_enabled: true
            spark_shared_secret_bit_length: 100
            spark_ui_options:
              encryption: custom
              encryption_options:
                algorithm: algorithm
                cipher_suites: cipherSuites
                enabled: true
                keystore: keystore
                keystore_password: keystorePassword
                keystore_type: JCEKS
                protocol: protocol
                require_client_auth: true
                truststore: truststore
                truststore_password: truststorePassword
                truststore_type: PKCS12
            system_info_encryption_options:
              chunk_length_kb: 129
              cipher_algorithm: cipher.algorithm
              enabled: true
              key_provider: key.provider
              kmip_host: kmip.host
              secret_key_strength: 128
            system_key_directory: system.key.directory
            tiered_storage_options:
              option1:
                local_options:
                  localOption1: localValue1
                  localOption2: localValue2
                tiers:
                  - paths:
                      - path1
                      - path2
            ttl_index_rebuild_options:
              fixed_rate_period: 100
              initial_delay: 101
              max_docs_per_batch: 102
              thread_pool_size: 103
            user_level_latency_tracking_options:
              enabled: true
              quantiles: true
              refresh_rate_ms: 100
              top_stats_limit: 100
          jvmOptions:
            heap_initial_size: 512Mi
            heap_max_size: 512Mi
    mgmtAPIHeap: 64Mi
