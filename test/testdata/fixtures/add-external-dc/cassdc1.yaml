apiVersion: v1
kind: Secret
metadata:
  name: test-superuser
data:
  password: dDBwLVNlY3JldA==
  username: dGVzdC1zdXBlcnVzZXI=
type: Opaque
---
apiVersion: cassandra.datastax.com/v1beta1
kind: CassandraDatacenter
metadata:
  name: dc1
spec:
  clusterName: test
  config:
    cassandra-yaml:
      authenticator: PasswordAuthenticator
      authorizer: CassandraAuthorizer
      auto_snapshot: false
      concurrent_compactors: 1
      concurrent_counter_writes: 2
      concurrent_reads: 2
      concurrent_writes: 2
      memtable_flush_writers: 1
      num_tokens: 256
      role_manager: CassandraRoleManager
      start_rpc: false
    jvm-server-options:
      garbage_collector: G1GC
      initial_heap_size: 402653184
      max_heap_size: 402653184
  networking:
    hostNetwork: true
  podTemplateSpec:
    spec:
      containers:
        - env:
            - name: METRIC_FILTERS
              value: >-
                deny:org.apache.cassandra.metrics.Table
                deny:org.apache.cassandra.metrics.table
                allow:org.apache.cassandra.metrics.table.live_ss_table_count
                allow:org.apache.cassandra.metrics.Table.LiveSSTableCount
                allow:org.apache.cassandra.metrics.table.live_disk_space_used
                allow:org.apache.cassandra.metrics.table.LiveDiskSpaceUsed
                allow:org.apache.cassandra.metrics.Table.Pending
                allow:org.apache.cassandra.metrics.Table.Memtable
                allow:org.apache.cassandra.metrics.Table.Compaction
                allow:org.apache.cassandra.metrics.table.read
                allow:org.apache.cassandra.metrics.table.write
                allow:org.apache.cassandra.metrics.table.range
                allow:org.apache.cassandra.metrics.table.coordinator
                allow:org.apache.cassandra.metrics.table.dropped_mutations
            - name: MANAGEMENT_API_HEAP_SIZE
              value: '67108864'
          name: cassandra
          resources: {}
  resources: {}
  serverType: cassandra
  serverVersion: 5.0.4
  size: 2
  storageConfig:
    cassandraDataVolumeClaimSpec:
      accessModes:
        - ReadWriteOnce
      resources:
        requests:
          storage: 5Gi
      storageClassName: standard
  superuserSecretName: test-superuser
  systemLoggerResources: {}
